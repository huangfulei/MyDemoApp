(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{hZ2J:function(n,t,o){"use strict";o.r(t);var e=o("Valr"),i=o("QJY3"),r=o("5dmV"),c=o("DUip"),a=o("mrSG"),s=o("8IAd"),l=o("oUVn"),b=o("TYT/"),p=function(n){function t(){var t=n.call(this)||this;return t.MODEL_NAME="login",t.LOGIN_ENDPOINT=s.a.LOG_IN,t.OAUTH_TOKEN_ENDPOINT=s.a.OAUTH_TOKEN,n.prototype.setApiEndpoint.call(t,t.LOGIN_ENDPOINT),n.prototype.setModelName.call(t,t.MODEL_NAME),t}return Object(a.c)(t,n),t.prototype.login=function(n){return this.simplePost(this.LOGIN_ENDPOINT,n,this.MODEL_NAME).toPromise()},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac=function(n){return new(n||t)},providedIn:"root"}),t}(l.a),u=o("oX5U"),g=o("jZRm"),f=o("kJOp"),d=o("wcYx"),x=o("9jxa"),O=o("+9eF"),h=function(){function n(n){this.globalData=n}return n.prototype.setUserTypeToUser=function(){Object(x.c)(this.globalData.getUser())||console.log("User object is null in Global Data!")},n.prototype.isUserJointVenture=function(){return!1},n.\u0275fac=function(t){return new(t||n)(b.Yb(O.a))},n.\u0275prov=b.Kb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),m=o("6BC6");function _(n,t){if(1&n&&(b.Ub(0,"div",11),b.Ec(1),b.Tb()),2&n){var o=b.gc();b.Cb(1),b.Gc(" ",o.error," ")}}var P=function(){return["fas","lock"]},w=function(){return["/sign_up"]},M=[{path:"",component:function(){function n(n,t,o,e,i,r,c,a){this.fb=n,this.loginService=t,this.cookieService=o,this.userSessionService=e,this.userTypeService=i,this.globalData=r,this.router=c,this.loadingIndicatorService=a,this.returnUrl="/home"}return n.prototype.ngOnInit=function(){this.loginForm=this.fb.group({email:["",[i.n.required]],password:["",i.n.required]})},Object.defineProperty(n.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),n.prototype.onSubmit=function(){var n=this;this.loadingIndicatorService.startLoading(),console.log("hello");var t={email:this.f.email.value,password:this.f.password.value};this.loginForm.invalid||this.userSessionService.getAccessToken(t).subscribe((function(o){console.log(o),n.cookieService.set(g.a.JWT_TOKEN,o.access_token),n.cookieService.set(g.a.JWT_REFRESH_TOKEN,o.refresh_token),n.globalData.getUser()?(console.log("get user from user session"),n.globalData.setLoginStatus(!0),n.router.navigate([n.returnUrl])):(console.log("get user from backend"),n.loginService.login(t).then((function(t){console.log(t),Object(x.c)(t.login)&&(n.globalData.setUserSession(t.login),n.globalData.setTotalNumberOfProducts(t.login.totalNumberOfProducts),n.globalData.setLoginStatus(!0),n.cookieService.set(g.a.LOGIN_STATUS,"true"),n.cookieService.set(g.a.TOTAL_NUMBER_OF_PRODUCTS,t.login.totalNumberOfProducts),n.router.navigate([n.returnUrl]))})).catch((function(t){console.error(t),n.error=t.error.error_description,n.loadingIndicatorService.finishLoading()}))),n.loadingIndicatorService.finishLoading()}),(function(n){console.log(n)}))},n.\u0275fac=function(t){return new(t||n)(b.Ob(i.c),b.Ob(p),b.Ob(f.a),b.Ob(d.a),b.Ob(h),b.Ob(O.a),b.Ob(c.a),b.Ob(u.a))},n.\u0275cmp=b.Ib({type:n,selectors:[["app-login"]],decls:21,vars:6,consts:[[3,"formGroup"],[1,"segment"],["class","alert alert-danger",4,"ngIf"],["type","email","placeholder","Email Address","formControlName","email"],["type","password","placeholder","Password","formControlName","password"],[1,"login",3,"click"],[3,"icon"],[1,"signUp",3,"routerLink"],["type","button",1,"unit"],[1,"icon","ion-md-bookmark"],[1,"icon","ion-md-settings"],[1,"alert","alert-danger"]],template:function(n,t){1&n&&(b.Ub(0,"form",0),b.Ub(1,"div",1),b.Ub(2,"h1"),b.Ec(3,"Log In"),b.Tb(),b.Tb(),b.Cc(4,_,2,1,"div",2),b.Ub(5,"label"),b.Pb(6,"input",3),b.Tb(),b.Ub(7,"label"),b.Pb(8,"input",4),b.Tb(),b.Ub(9,"button",5),b.cc("click",(function(n){return t.onSubmit()})),b.Pb(10,"fa-icon",6),b.Ec(11," Log in"),b.Tb(),b.Ub(12,"button",7),b.Ec(13,"Sign Up"),b.Tb(),b.Ub(14,"div",1),b.Ub(15,"button",8),b.Pb(16,"i",9),b.Tb(),b.Ub(17,"button",8),b.Pb(18,"i",9),b.Tb(),b.Ub(19,"button",8),b.Pb(20,"i",10),b.Tb(),b.Tb(),b.Tb()),2&n&&(b.lc("formGroup",t.loginForm),b.Cb(4),b.lc("ngIf",t.error),b.Cb(6),b.lc("icon",b.nc(4,P)),b.Cb(2),b.lc("routerLink",b.nc(5,w)))},directives:[i.o,i.j,i.e,e.k,i.b,i.i,i.d,m.a,c.b],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{background-color:#ebecf0}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], p[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;letter-spacing:-.2px;font-size:16px}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#babecc;text-shadow:1px 1px 1px #fff}form[_ngcontent-%COMP%]{padding:16px;width:320px;margin:0 auto}.segment[_ngcontent-%COMP%]{padding:32px 0;text-align:center}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border:0;outline:0;font-size:16px;border-radius:320px;padding:16px;background-color:#ebecf0;text-shadow:1px 1px 0 #fff}label[_ngcontent-%COMP%]{display:block;margin-bottom:24px;width:100%}input[_ngcontent-%COMP%]{margin-right:8px;box-shadow:inset 2px 2px 5px #babecc,inset -5px -5px 10px #fff;width:100%;box-sizing:border-box;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-moz-appearance:none;appearance:none;-webkit-appearance:none}input[_ngcontent-%COMP%]:focus{box-shadow:inset 1px 1px 2px #babecc,inset -1px -1px 2px #fff}button[_ngcontent-%COMP%]{color:#61677c;font-weight:700;box-shadow:-5px -5px 20px #fff,5px 5px 20px #babecc;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;cursor:pointer;font-weight:600}button[_ngcontent-%COMP%]:hover{box-shadow:-2px -2px 5px #fff,2px 2px 5px #babecc}button[_ngcontent-%COMP%]:active{box-shadow:inset 1px 1px 2px #babecc,inset -1px -1px 2px #fff}button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:8px}button.unit[_ngcontent-%COMP%]{border-radius:8px;line-height:0;width:48px;height:48px;display:-webkit-inline-box;display:inline-flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin:0 8px;font-size:19.2px}button.unit[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:0}button.login[_ngcontent-%COMP%]{display:block;width:100%;color:#ae1100}button.signUp[_ngcontent-%COMP%]{margin-top:24px;display:block;width:100%;color:#32cd32}.input-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;-webkit-box-flex:1;flex:1}"]}),n}()}],v=function(){function n(){}return n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({factory:function(t){return new(t||n)},imports:[[c.c.forChild(M)],c.c]}),n}(),C=o("wHSu");o.d(t,"LoginModule",(function(){return k}));var k=function(){function n(n){this.library=n,n.addIcons(C.b)}return n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({factory:function(t){return new(t||n)(b.Yb(m.b))},providers:[],imports:[[e.c,r.a,i.l,v,m.c]]}),n}()}}]);